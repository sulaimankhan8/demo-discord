ARTILLERY SOCKET.IO LOAD TEST REPORT
==================================

Target:
https://demo-discord.onrender.com

Test ID:30

Test Summary
------------
Total duration        : ~5 minutes 1 second
Total virtual users   : 3900
Total emits           : 31,660
Engine                : Socket.IO (WebSocket + polling fallback)

Phases
------
1. Warm-up
   Duration           : 30s
   Arrival rate       : 10 users/sec
   Status             : Stable, no errors
   Notes              : p95 latency < 3 ms

2. Steady Load
   Duration           : 60s
   Arrival rate       : 20 users/sec
   Status             : Partial saturation
   Notes              : Timeouts and polling fallback begin near ~200 msg/sec

3. Stress
   Duration           : 60s
   Arrival rate       : 40 users/sec
   Status             : Overload
   Notes              : Burst spikes up to ~440 msg/sec with transport instability

Performance Metrics
-------------------
Sustained throughput  : ~150 messages/sec
Peak throughput       : ~440 messages/sec
Median latency        : ~0.1 ms
P95 latency           : ~0.8 ms
P99 latency           : ~2.8 ms
Max latency observed  : ~3027 ms (transport starvation)

Errors
------
Timeout errors        : 1430
XHR poll errors       : 199
XHR post errors       : 200
Server errors         : 47
Failed VUs            : 1876 (~48%)

Session Length (ms)
-------------------
Minimum               : 10,788
Mean                  : 41,902
Median                : 34,554
P95                   : 99,741
P99                   : 148,798
Maximum               : 173,341

System Behavior
---------------
- Message ordering preserved (Snowflake IDs)
- No duplicate messages detected
- Database writes remained consistent
- Write batching adapted dynamically
- Socket.IO fell back to polling under sustained overload
- System degraded predictably without crashing

Bottlenecks Identified
---------------------
1. Single Node.js event loop saturation
2. Database write pressure during batch flush
3. Transport fallback (WebSocket â†’ polling)
4. Lack of admission control during overload

Capacity Conclusion
-------------------
Safe operating range:
- ~150 messages/sec
- ~200 concurrent active users

Beyond this range:
- Transport-level timeouts increase
- Session durations grow significantly
- Application-level correctness remains intact

Verdict
-------
The system demonstrates strong protocol correctness
with controlled and predictable degradation under load.
Observed failures are attributable to capacity limits,
not architectural or data-consistency flaws.

END OF REPORT
