# ARTILLERY SOCKET.IO LOAD TEST REPORT

Target:
[https://demo-discord.onrender.com](https://demo-discord.onrender.com)

Test ID: 34
(WebSocket-only transport, polling disabled)

Engine:
Socket.IO (WebSocket only, no polling fallback)

## Test Summary

Total duration        : ~3 minutes 0 seconds
Total virtual users   : 3900
Completed VUs         : 1355
Failed VUs            : 2545 (~65%)
Total emits           : 21,680
Average emit rate     : ~169 msgs/sec
Peak emit rate        : ~320–340 msgs/sec (burst)

## Phases

1. Warm-up
   Duration           : 30s
   Arrival rate       : ~10 users/sec
   Status             : Stable
   Notes              :

   * No failures observed
   * Emit rate ~110–150 msg/sec
   * Median latency ~0.5 ms
   * p95 latency ~1.0 ms
   * WebSocket-only transport stable

2. Steady Load
   Duration           : 60s
   Arrival rate       : ~20 users/sec
   Status             : Saturation threshold
   Notes              :

   * Sustained throughput ~150–220 msg/sec
   * Median latency ~0.4–0.5 ms
   * p95 latency ~0.9–1.0 ms
   * Timeouts begin without polling fallback
   * Failure mode is clean disconnects, not protocol errors

3. Stress
   Duration           : 60s
   Arrival rate       : ~40 users/sec
   Status             : Overload
   Notes              :

   * Peak throughput bursts ~320–340 msg/sec
   * WebSocket errors appear (no polling safety net)
   * Timeout rate increases sharply
   * Session lengths plateau instead of exploding
   * System remains responsive, no crash

## Performance Metrics

Sustained throughput  : ~150–220 messages/sec
Peak throughput       : ~320–340 messages/sec
Median latency        : ~0.4 ms
P95 latency           : ~0.9 ms
P99 latency           : ~1.2 ms
Max latency observed  : ~5.8 ms

## Errors

Timeout errors        : 2223
WebSocket errors      : 322
Total failed VUs      : 2545 (~65%)

## Session Length (ms)

Minimum               : 11,228
Mean                  : 26,056
Median                : 27,730
P95                   : 33,199
P99                   : 40,550
Maximum               : 42,485

## System Behavior

* Message ordering preserved (Snowflake IDs)
* No duplicate messages detected
* No message loss at application level
* Backpressure engaged immediately under load
* WAL buffering prevented uncontrolled memory growth
* Batched ACKs reduced socket write amplification
* No HTTP polling amplification
* Failure mode dominated by transport capacity, not DB
* Degradation was linear and predictable

## Bottlenecks Identified

1. WebSocket connection fan-out limits per instance
2. Event loop saturation under concurrent emit bursts
3. Socket.IO per-connection overhead
4. No transport-level admission control
5. Single-instance WebSocket scalability ceiling

## Capacity Conclusion

Safe operating range:

* ~150–220 messages/sec sustained
* ~120–160 concurrent active WebSocket users

Degradation zone:

* ~220–300 messages/sec
* Rising timeout rate, stable latency

Overload zone:

* > 300 messages/sec
* WebSocket disconnects dominate
* ~65% virtual user failure
* System remains alive and responsive

## Verdict

This WebSocket-only run validates that prior instability was heavily
amplified by HTTP polling fallback.

With polling removed, the system fails faster but far more cleanly,
with lower latencies, shorter sessions, and predictable saturation.

The remaining limits are intrinsic to Socket.IO WebSocket fan-out
and single-node event-loop capacity, not protocol correctness or
persistence logic.

END OF REPORT
